{% extends "base_r2.html" %}

{% load crispy_forms_tags %}

{% block title %}{{ block.super }}Sign Up{% endblock %}

{% block form_heading %}Signing Up is Free{% endblock %}

{% block list_of_items %}
<div class="container mt-5">
  <div class="row">
    <div class="container d-flex justify-content-center">
      <div class="col-lg-6 col-12">
        <div class="card mb-4 mt-5 shadow">
          <div class="card-header">
            <h3 class="pt-3">Sign up</h3>
          </div>
          <div class="card-text p-3">
            {% block form %}
            {% crispy form %}

            <div class="form-message">
              <p>
                <br/>
                Already signed up? <a href="{% url 'accounts:login' %}">Log in</a>.
              </p>
              <br>
              By clicking on Register, you accept our <a href="/terms"> Terms of Use</a>. Learn more about how we collect, use and share your information in the <a href="/privacy"> Privacy section</a>, as well as our use of cookies and similar technologies in our <a href="/privacy#coockies">Cookie Policy</a></p>
            </div>
            {% endblock form %}
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

{% endblock list_of_items %}

{% block scripts %}
<script type="text/javascript">

  $(document).ready(function () {
    $("#div_id_ecsa_reduced_fee").hide();
    $("#div_id_ecsa_old_member_fee").hide();
    $("#div_id_ecsa_street").hide();
    $("#div_id_ecsa_postal_code").hide();
    $("#div_id_ecsa_city").hide();
    $("#div_id_ecsa_country").hide();
    $("#div_id_occupation").hide();
    $("#div_id_ecsa_community_mailing_list").hide();
    $("#id_ecsa_street").prop('required',false);
    $("#id_ecsa_postal_code").prop('required',false);
    $("#id_ecsa_city").prop('required',false);
    $("#id_ecsa_country").prop('required',false);
    $("#id_occupation").prop('required',false);

    $('#div_id_ecsa_individual_membership').append(
      $("<br/><a target='_blank' href='/ecsa_membership/'>").text("ECSA membership:")
      ).append(  
      $("<span>").text(" benefits, type and contributions")      
    ).append(
      $("<br/><span>").text("Remember that you can become an ECSA member as an organisation as well.")
    ).append($("<br/><p>"));


    $('#div_id_ecsa_street label, #div_id_ecsa_postal_code label, #div_id_ecsa_city label, #div_id_ecsa_country label').append(
        $("<span>", {"class": "required-indicator"}).text("*")
    );


    $("#id_ecsa_individual_membership").on('change', function(e){
      if($("#id_ecsa_individual_membership")[0].checked){         
        $('#div_id_ecsa_individual_membership').append(
          $("<div><br/>").text("Contribution for individual membership: 50 â‚¬")
        ).append(
          $("<div><br/>").text("I am eligible for:")
        );
        $("#div_id_ecsa_reduced_fee").show();     
        $("#div_id_ecsa_old_member_fee").show();
        $("#div_id_ecsa_street").show();        
        $("#div_id_ecsa_postal_code").show();
        $("#div_id_ecsa_city").show();        
        $("#div_id_ecsa_country").show();
        $("#div_id_occupation").show();
        $("#div_id_ecsa_community_mailing_list").show();
        $("#id_ecsa_street").prop('required',true);
        $("#id_ecsa_postal_code").prop('required',true);
        $("#id_ecsa_city").prop('required',true);
        $("#id_ecsa_country").prop('required',true);        
      }else{
        $('#div_id_ecsa_individual_membership div').remove();
        $('#div_id_ecsa_individual_membership div').remove();
        $("#div_id_ecsa_reduced_fee").hide();
        $("#div_id_ecsa_old_member_fee").hide();
        $("#div_id_ecsa_street").hide();
        $("#div_id_ecsa_postal_code").hide();
        $("#div_id_ecsa_city").hide();
        $("#div_id_ecsa_country").hide();
        $("#div_id_occupation").hide();
        $("#div_id_ecsa_community_mailing_list").hide();
        $("#id_ecsa_street").prop('required',false);
        $("#id_ecsa_postal_code").prop('required',false);
        $("#id_ecsa_city").prop('required',false);
        $("#id_ecsa_country").prop('required',false);           
      }
    });
  });

</script>
{% endblock %}